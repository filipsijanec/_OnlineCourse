(()=>{"use strict";const t=WCBT_GLOBAL_OBJECT.is_multisite||!1,e=WCBT_GLOBAL_OBJECT.blog_id||"",o=window.wp.url,n=document.querySelector("#wcbt-snackbar");let c;const{__}=wp.i18n,i=(WCBT_COMPARE_OBJECT.add_compare_tooltip_text,WCBT_COMPARE_OBJECT.remove_compare_tooltip_text,WCBT_GLOBAL_OBJECT.user_id,()=>{const o=(o=>{t&&(o=`${o}_${e}`),o+="=";const n=decodeURIComponent(document.cookie).split(";");for(let t=0;t<n.length;t++){let e=n[t];for(;" "===e.charAt(0);)e=e.substring(1);if(0===e.indexOf(o))return e.substring(o.length,e.length)}return""})("wcbt_compare_product");return null!==o&&o?o.split(",").map(Number):[]}),{__:r}=(WCBT_GLOBAL_OBJECT.rest_namespace,WCBT_GLOBAL_OBJECT.user_id,wp.i18n),_=(WCBT_WISHLIST_OBJECT.add_wishlist_tooltip_text,WCBT_WISHLIST_OBJECT.remove_wishlist_tooltip_text,document.querySelector(".wcbt-compare-box")),{__:s}=wp.i18n;let a,d;const l=()=>{_.style.opacity=.4;const t={post_in:i()};wp.apiFetch({path:(0,o.addQueryArgs)("/"+d+"/compare",t),method:"GET"}).then((t=>{t.data.content&&(_.innerHTML=t.data.content)})).catch((t=>{console.log(t)})).finally((()=>{_.style.opacity=1}))},p=()=>{_&&(a=WCBT_GLOBAL_OBJECT.rest_url||"",d=WCBT_GLOBAL_OBJECT.rest_namespace||"",l(),document.addEventListener("click",(function(o){const r=o.target,a=r.closest(".remove");if(a&&_.contains(r)){let o=a.getAttribute("data-product-id");o&&(o=parseInt(o));let r=i();r.includes(o)&&(r=r.filter((t=>t!==o)),((o,n,c=0,i=0)=>{const r=new Date;r.setTime(r.getTime()+24*c*60*60*1e3+60*i*60*1e3);const _="expires="+r.toUTCString();t&&(o=`${o}_${e}`),document.cookie=`${o}=${n};${_};path=/`})("wcbt_compare_product",r.join(","),30),l(),n.innerHTML=s("Product Compare removed","wcbt"),n.classList.add("active"),c&&clearTimeout(c),c=setTimeout((()=>{n.classList.remove("active"),n.innerHTML=""}),"3000"))}})))};document.addEventListener("DOMContentLoaded",(t=>{p()}))})();